package modelo;

import java.util.ArrayList;

public class AerolineaLanchita extends Aerolinea{
	IAerolineaLanchita aerolinea;
	@Override
	void reservar(Usuario usuario, Asiento asiento) {
		if(asiento.getEstadoReservado()) {
			asientosReservados.add(new AsientoReservado(asiento,usuario));
		}
		else {
			aerolinea.reservar(asiento.getCodigoAsiento(),usuario.getDNI());
		}
	}

	@Override
	void comprar(Usuario usuario, Asiento asiento) {
		
	}

	@Override
	ArrayList<Asiento> asientosDisponibles(String origen, String fechaSalida, String horaSalida, String destino, String fechaLlegada, String horaLlegada) {
		ArrayList<ArrayList<String>> resultadoBusqueda = aerolinea.asientosDisponibles(horaLlegada, horaLlegada, horaLlegada, horaLlegada, horaLlegada, horaLlegada);
		ArrayList<Asiento> asientosDisponibles = new ArrayList<Asiento>();
		resultadoBusqueda.forEach(asiento -> parsearAsiento(asiento));
		return asientosDisponibles;
	}
	
	private Asiento parsearAsiento(ArrayList<String> asiento){
		String codigoAsiento = asiento.get(0);
		Double precio = Double.parseDouble(asiento.get(1));
		TipoClaseAsiento clase = tipoAsiento(asiento.get(2));
		TipoUbicacionAsiento ubicacion = ubicacionAsiento(asiento.get(3));
		Boolean estadoReservado = estadoAsiento(asiento.get(4));
		return new Asiento(codigoAsiento,precio,clase,ubicacion,estadoReservado);
	}
	
	private Boolean estadoAsiento(String estado) {
		if(estado == "D") {
			return true;
		}
		else if(estado =="R") {
			return false;
		}
		return null;
	}
	
	private TipoClaseAsiento tipoAsiento(String clase) {
		switch (clase){
		case "T":
			return TipoClaseAsiento.TURISTA;
		case "E":
			return TipoClaseAsiento.EJECUTIVA;
		case "P":
			return TipoClaseAsiento.PRIMERA;
		default:
			return null;
		}
	}
	
	private TipoUbicacionAsiento ubicacionAsiento(String ubicacion) {
		switch (ubicacion){
		case "V":
			return TipoUbicacionAsiento.VENTANILLA;
		case "C":
			return TipoUbicacionAsiento.CENTRO;
		case "P":
			return TipoUbicacionAsiento.PASILLO;
		default:
			return null;
		}
	}
}
